#!/bin/sh

case $BLOCK_BUTTON in
    1) sudo dmenugpu ;;
    3) notify-send "ðŸ”° GPU module" "\- Click to toggle
ðŸš€: Nvidia
ðŸ’»: Intel
" ;;
    6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

# GPU_TEMP=($(nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader))
# if [[ $GPU_TEMP == *"NVIDIA-SMI"* ]]; then
#   RES="CPU:ðŸŒ¡$CPU_TEMPÂ°C"
# else
#   RES="CPU:ðŸŒ¡$CPU_TEMPÂ°C|GPU:ðŸŒ¡$GPU_TEMPÂ°C"
# fi

case $GPU_MODE in
    intel) MODE="ðŸ’»GPU:Intel" ;;
    nvidia)
        POWER=$(nvidia-smi --query-gpu=power.draw --format=csv,noheader,nounits | paste -sd '/')
        MODE="ðŸš€GPU:Nvidia(${POWER%.*}W)"
        ;;
    hybrid) MODE="âœ¨GPU:Hybrid" ;;
esac

RES="$MODE"
echo "$RES"
